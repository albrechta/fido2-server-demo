!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("whatInput",[],t):"object"==typeof exports?exports.whatInput=t():e.whatInput=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e){"use strict";e.exports=function(){var e="initial",t=null,n=document.documentElement,o=["input","select","textarea"],r=[],i=[16,17,18,91,93],u=[9],d={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"},a=[],s=!1,p=!1,c={x:null,y:null},f={2:"touch",3:"touch",4:"mouse"},v=!1;try{var l=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",null,l)}catch(h){}var m=function(){d[O()]="mouse",w(),x()},w=function(){var e=v?{passive:!0}:!1;window.PointerEvent?(n.addEventListener("pointerdown",y),n.addEventListener("pointermove",E)):window.MSPointerEvent?(n.addEventListener("MSPointerDown",y),n.addEventListener("MSPointerMove",E)):(n.addEventListener("mousedown",y),n.addEventListener("mousemove",E),"ontouchstart"in window&&(n.addEventListener("touchstart",L,e),n.addEventListener("touchend",L))),n.addEventListener(O(),E,e),n.addEventListener("keydown",y),n.addEventListener("keyup",y)},y=function(n){if(!s){var r=n.which,a=d[n.type];if("pointer"===a&&(a=M(n)),e!==a||t!==a){var p=document.activeElement,c=!1,f=p&&p.nodeName&&-1===o.indexOf(p.nodeName.toLowerCase());(f||-1!==u.indexOf(r))&&(c=!0),("touch"===a||"mouse"===a||"keyboard"===a&&r&&c&&-1===i.indexOf(r))&&(e=t=a,x())}}},x=function(){n.setAttribute("data-whatinput",e),n.setAttribute("data-whatintent",e),-1===a.indexOf(e)&&(a.push(e),n.className+=" whatinput-types-"+e),b("input")},E=function(e){if(c.x!==e.screenX||c.y!==e.screenY?(p=!1,c.x=e.screenX,c.y=e.screenY):p=!0,!s&&!p){var o=d[e.type];"pointer"===o&&(o=M(e)),t!==o&&(t=o,n.setAttribute("data-whatintent",t),b("intent"))}},L=function(e){"touchstart"===e.type?(s=!1,y(e)):s=!0},b=function(e){for(var n=0,o=r.length;o>n;n++)r[n].type===e&&r[n].fn.call(void 0,t)},M=function(e){return"number"==typeof e.pointerType?f[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType},O=function(){var e=void 0;return e="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},g=function(e){for(var t=0,n=r.length;n>t;t++)if(r[t].fn===e)return t};return"addEventListener"in window&&Array.prototype.indexOf&&m(),{ask:function(n){return"loose"===n?t:e},types:function(){return a},ignoreKeys:function(e){i=e},registerOnChange:function(e,t){r.push({fn:e,type:t||"input"})},unRegisterOnChange:function(e){var t=g(e);t&&r.splice(t,1)}}}()}])});